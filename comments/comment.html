<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <!-- The comment form -->
    <form id="comment-form">
      <label for="name">Name:</label>
      <input type="text" id="name" name="name" /><br /><br />
      <label for="comment">Comment:</label>
      <textarea id="comment" name="comment"></textarea><br /><br />
      <button type="submit">Submit</button>
    </form>

    <!-- The container for displaying comments -->
    <div id="comments-container">
      <!-- Comments will be dynamically added here -->
    </div>
  </body>
  <script>
    // Attach event listener to the comment form submit button
    document
      .querySelector("#comment-form")
      .addEventListener("submit", submitComment);

    function submitComment(event) {
      // Prevent the default form submission behavior
      event.preventDefault();

      // Get the comment data from the form
      const name = document.querySelector("#name").value;
      const comment = document.querySelector("#comment").value;

      // Create a new AJAX request
      const xhr = new XMLHttpRequest();
      xhr.open("POST", "submit_comment.php");
      xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");

      // Send the comment data to the server
      xhr.send(
        `name=${encodeURIComponent(name)}&comment=${encodeURIComponent(
          comment
        )}`
      );

      // Handle the server response
      xhr.onload = function () {
        if (xhr.status === 200) {
          // The comment was successfully submitted, update the page content
          const newComment = document.createElement("div");
          newComment.innerHTML = `<strong>${name}</strong>: ${comment}`;
          document.querySelector("#comments-container").appendChild(newComment);

          // Reset the comment form
          document.querySelector("#name").value = "";
          document.querySelector("#comment").value = "";
        } else {
          // There was an error submitting the comment, handle it appropriately
          console.error("Error submitting comment");
        }
      };
    }
  </script>
</html>
